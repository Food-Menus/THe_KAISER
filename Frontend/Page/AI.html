<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <div id="head" data-img="./../../Static/img/Logo2.png" data-style="./../../Static/style.css" ></div>
    </head>

<body>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--Components-->
<div id="sidebar" data-AI="./AI.html" data-about="./about.html"></div>
<div id="navbar" data-Location="./Location.html" data-img="./../../Static/img/Logo1.png" ></div>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--elments-->


    <div class="header">
        <h1>مساعد القيصر الشخصي</h1>
    </div>

    <div class="assistant-container">
        <div class="conversation" id="conversation">
            <div class="message bot-message">مرحباً! أنا مساعدك الشخصي. كيف يمكنني مساعدتك اليوم؟</div>
        </div>
        
        <div class="typing-indicator" id="typing-indicator">يكتب...</div>
        
        <div class="options-container" id="options-container">
            <!-- سيتم ملء الخيارات هنا بالجافاسكريبت -->
        </div>
    </div>

    <script>
        // هيكل البيانات للأسئلة والإجابات المتشعبة
        const knowledgeTree = {
            "root": {
                message: "مرحباً! أنا مساعدك الشخصي. كيف يمكنني مساعدتك اليوم؟",
                options: [
                    { text: "معلومات عن الشركة", next: "company_info" },
                    { text: "الخدمات التي نقدمها", next: "services" },
                    { text: "طرق التواصل معنا", next: "contact" },
                    { text: "الأسئلة الشائعة", next: "faq" }
                ]
            },
            "company_info": {
                message: "شركتنا متخصصة في تقديم الحلول التقنية منذ عام 2010. ماذا تريد أن تعرف؟",
                options: [
                    { text: "تاريخ الشركة", next: "company_history" },
                    { text: "فريق العمل", next: "team" },
                    { text: "الرؤية والرسالة", next: "vision" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "company_history": {
                message: "تأسست الشركة في عام 2010 بفريق مكون من 5 أفراد، والآن لدينا أكثر من 100 موظف في 3 فروع مختلفة.",
                options: [
                    { text: "المزيد عن الفروع", next: "branches" },
                    { text: "العودة لمعلومات الشركة", next: "company_info" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "branches": {
                message: "لدينا فروع في: الرياض (المقر الرئيسي)، جدة، والدمام. كل فرع متخصص في مجال معين من خدماتنا.",
                options: [
                    { text: "العودة لتاريخ الشركة", next: "company_history" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "team": {
                message: "فريقنا مكون من مجموعة من أفضل الخبراء في مجالات التصميم، البرمجة، التسويق، والدعم الفني.",
                options: [
                    { text: "العودة لمعلومات الشركة", next: "company_info" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "vision": {
                message: "رؤيتنا: أن نكون الرواد في تقديم الحلول التقنية المبتكرة. رسالتنا: تقديم حلول تقنية عالية الجودة تلبي احتياجات عملائنا.",
                options: [
                    { text: "العودة لمعلومات الشركة", next: "company_info" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "services": {
                message: "نقدم مجموعة متكاملة من الخدمات التقنية. أي خدمة تريد معرفة المزيد عنها؟",
                options: [
                    { text: "تصميم المواقع", next: "web_design" },
                    { text: "تطبيقات الجوال", next: "mobile_apps" },
                    { text: "التسويق الرقمي", next: "digital_marketing" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "web_design": {
                message: "نقدم خدمات تصميم مواقع احترافية بتقنيات حديثة مثل HTML5, CSS3, JavaScript، وأنظمة إدارة المحتوى مثل WordPress.",
                options: [
                    { text: "أسعار تصميم المواقع", next: "web_pricing" },
                    { text: "رؤية أعمالنا", next: "portfolio" },
                    { text: "العودة للخدمات", next: "services" }
                ]
            },
            "web_pricing": {
                message: "تبدأ أسعارنا من 2000 ريال للمواقع الأساسية، وتصل إلى 15000 ريال للمواقع المتكاملة مع نظام إدارة محتوى مخصص.",
                options: [
                    { text: "العودة لتصميم المواقع", next: "web_design" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "contact": {
                message: "يمكنك التواصل معنا عبر: الهاتف: 0112345678، البريد الإلكتروني: info@example.com، أو زيارة مقرنا في الرياض، حي العليا.",
                options: [
                    { text: "ساعات العمل", next: "working_hours" },
                    { text: "نموذج التواصل", next: "contact_form" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "working_hours": {
                message: "نعمل من الأحد إلى الخميس، من الساعة 8 صباحاً حتى 4 مساءً. العطلة الرسمية يومي الجمعة والسبت.",
                options: [
                    { text: "العودة لطرق التواصل", next: "contact" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            },
            "faq": {
                message: "الأسئلة الشائعة. اختر أحد المواضيع التالية:",
                options: [
                    { text: "أسئلة عن الخدمات", next: "faq_services" },
                    { text: "أسئلة عن الدفع", next: "faq_payment" },
                    { text: "أسئلة فنية", next: "faq_technical" },
                    { text: "العودة للقائمة الرئيسية", next: "root" }
                ]
            }
            // يمكنك إضافة المزيد من الفروع هنا
        };

        // متغيرات DOM
        const conversation = document.getElementById('conversation');
        const optionsContainer = document.getElementById('options-container');
        const typingIndicator = document.getElementById('typing-indicator');

        // متغير لتتبع المسار الحالي
        let currentPath = ['root'];

        // تهيئة المساعد عند تحميل الصفحة
        window.onload = function() {
            showNode('root');
        };

        // دالة لعرض العقدة (السؤال والخيارات)
        function showNode(nodeId) {
            const node = knowledgeTree[nodeId];
            if (!node) return;

            // عرض مؤشر الكتابة
            showTypingIndicator();
            
            // مسح الخيارات القديمة
            optionsContainer.innerHTML = '';
            
            // تأخير لعرض الرسالة والخيارات
            setTimeout(() => {
                hideTypingIndicator();
                
                // عرض رسالة البوت
                displayMessage(node.message, 'bot');
                
                // عرض الخيارات
                node.options.forEach(option => {
                    const button = document.createElement('button');
                    button.className = 'option-btn';
                    button.textContent = option.text;
                    button.onclick = function() {
                        // عرض اختيار المستخدم
                        displayMessage(option.text, 'user');
                        
                        // تحديث المسار
                        currentPath.push(option.next);
                        
                        // الانتقال للعقدة التالية
                        showNode(option.next);
                    };
                    optionsContainer.appendChild(button);
                });
                
                // إضافة زر العودة إذا لم يكن في الجذر
                if (nodeId !== 'root') {
                    const backButton = document.createElement('button');
                    backButton.className = 'back-btn';
                    backButton.textContent = '← العودة للسابق';
                    backButton.onclick = function() {
                        // العودة للعقدة السابقة
                        currentPath.pop();
                        const prevNode = currentPath[currentPath.length - 1];
                        showNode(prevNode);
                    };
                    optionsContainer.appendChild(backButton);
                }
                
                // التمرير لأسفل
                conversation.scrollTop = conversation.scrollHeight;
            }, 1000);
        }

        // دالة لعرض الرسالة في المحادثة
        function displayMessage(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            
            if (sender === 'user') {
                messageElement.classList.add('user-choice');
            } else {
                messageElement.classList.add('bot-message');
            }
            
            messageElement.textContent = message;
            conversation.appendChild(messageElement);
            
            // التمرير لأسفل
            conversation.scrollTop = conversation.scrollHeight;
        }

        // دالة عرض مؤشر الكتابة
        function showTypingIndicator() {
            typingIndicator.style.display = 'block';
            conversation.scrollTop = conversation.scrollHeight;
        }

        // دالة إخفاء مؤشر الكتابة
        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }
    </script>

<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--Components--><div id="footer"></div>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--liberary-->
<script src="./../../backend/javascript.js"></script>
<script src="./../Components/sidebar.js"></script>
<script src="./../Components/navbar.js"></script>
<script src="./../Components/footer.js"></script>
<script src="./../Components/Head.js"></script>
</body>
</html>